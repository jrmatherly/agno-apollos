---
title: "Environment variables"
description: "All configurable environment variables for Apollos AI."
---

Copy `example.env` to `.env` and set your values:

```bash
cp example.env .env
```

## LiteLLM Proxy (required)

| Variable | Required | Default | Description |
|----------|----------|---------|-------------|
| `LITELLM_API_KEY` | Yes | - | API key for your LiteLLM Proxy |
| `LITELLM_BASE_URL` | No | `http://localhost:4000/v1` | LiteLLM Proxy endpoint |

All LLM and embedding requests route through a [LiteLLM Proxy](https://docs.litellm.ai/docs/). This lets you use any supported model provider (OpenAI, Anthropic, Azure, etc.) without changing agent code.

## Models

| Variable | Default | Description |
|----------|---------|-------------|
| `MODEL_ID` | `gpt-5-mini` | LLM model ID passed to LiteLLM |
| `EMBEDDING_MODEL_ID` | `text-embedding-3-small` | Embedding model for knowledge base |
| `EMBEDDING_DIMENSIONS` | `1536` | Vector dimensions for embeddings |

## Database

| Variable | Default | Description |
|----------|---------|-------------|
| `DB_HOST` | `apollos-db` | PostgreSQL host (use Docker service name) |
| `DB_PORT` | `5432` | PostgreSQL port |
| `DB_USER` | `ai` | PostgreSQL user |
| `DB_PASS` | `ai` | PostgreSQL password |
| `DB_DATABASE` | `ai` | PostgreSQL database name |
| `DB_DRIVER` | `postgresql+psycopg` | SQLAlchemy database driver |

<Warning>
`.env` values must use Docker service names (e.g., `DB_HOST=apollos-db`) since the primary workflow is Docker-based. For local development without Docker, override `DB_HOST=localhost`.
</Warning>

## Security

### Entra ID Authentication

| Variable | Default | Description |
|----------|---------|-------------|
| `AZURE_TENANT_ID` | (empty) | Entra ID Directory (tenant) ID. All 4 required to enable auth. |
| `AZURE_CLIENT_ID` | (empty) | Entra ID Application (client) ID |
| `AZURE_CLIENT_SECRET` | (empty) | Client secret for Microsoft Graph API access |
| `AZURE_AUDIENCE` | (empty) | Token audience. Set to `api://{AZURE_CLIENT_ID}`. When the SPA client and API share one app registration, Azure issues tokens with a bare GUID audience. Both formats are accepted. |
| `AUTH_DEBUG` | `True` (dev) `False` (prod) | Log diagnostic 401 details: missing tokens, expired tokens, and audience mismatches with the actual `aud` value. |
| `FRONTEND_URL` | `http://localhost:3000` | CORS allowed origin for API responses |
| `JWT_SECRET_KEY` | (empty) | Legacy HS256 auth. Superseded by Entra ID when Azure vars are set. |

When all four `AZURE_*` values are set, the backend validates RS256 JWTs from Entra ID. When any is empty, auth is disabled. See [security configuration](/configuration/security) for details.

### Frontend Authentication (build-time)

These are baked into the Next.js bundle at build time. Pass as `build.args` in docker-compose:

| Variable | Default | Description |
|----------|---------|-------------|
| `NEXT_PUBLIC_AZURE_CLIENT_ID` | (empty) | Entra ID client ID for MSAL. Empty = manual token entry. |
| `NEXT_PUBLIC_AZURE_TENANT_ID` | (empty) | Entra ID tenant ID for MSAL |
| `NEXT_PUBLIC_REDIRECT_URI` | `http://localhost:3000` | MSAL redirect URI after login |

## Observability

| Variable | Default | Description |
|----------|---------|-------------|
| `TRACING_ENABLED` | (empty) | Set to `true` to store traces in PostgreSQL via Agno |
| `OTLP_ENDPOINTS` | (empty) | Comma-separated OTLP endpoint URLs for multi-export |
| `OTLP_AUTH_HEADERS` | (empty) | Comma-separated auth headers (parallel to `OTLP_ENDPOINTS`) |
| `OTEL_EXPORTER_OTLP_ENDPOINT` | (empty) | Legacy single-endpoint fallback. Prefer `OTLP_ENDPOINTS` |

See [telemetry configuration](/configuration/telemetry) for setup details and compatible backends.

## A2A Protocol

| Variable | Default | Description |
|----------|---------|-------------|
| `A2A_ENABLED` | (empty) | Set to `true` to expose agents via A2A protocol endpoints |
| `A2A_BASE_URL` | `http://localhost:8000` | Base URL used in AgentCard discovery URLs |

When `A2A_ENABLED=true`, each agent is accessible at `/a2a/agents/{agent-id}` via the [Agent-to-Agent protocol](https://a2a-protocol.org). See [A2A configuration](/configuration/a2a) for details.

## MCP Gateway

| Variable | Default | Description |
|----------|---------|-------------|
| `MCP_GATEWAY_ENABLED` | `false` | Set to `true` to route MCP traffic through ContextForge gateway |
| `MCP_GATEWAY_URL` | `http://apollos-mcp-gateway:4444` | Gateway base URL (Docker service name) |
| `MCP_GATEWAY_JWT_SECRET` | `dev-gateway-secret` | Shared HS256 secret for service-to-gateway tokens |
| `MCP_GATEWAY_ADMIN_EMAIL` | `admin@localhost` | Gateway admin email |
| `MCP_GATEWAY_ADMIN_PASSWORD` | `changeme` | Gateway admin password |
| `MCP_GATEWAY_PORT` | `4444` | Host port for gateway access |
| `MCP_GATEWAY_ENTRA_CLIENT_ID` | (empty) | Entra ID client ID for gateway SSO (optional) |
| `MCP_GATEWAY_ENTRA_CLIENT_SECRET` | (empty) | Entra ID client secret for gateway SSO (optional) |

When `MCP_GATEWAY_ENABLED=true`, agents route MCP connections through the ContextForge gateway instead of connecting directly. See [MCP Gateway configuration](/configuration/mcp-gateway) for details.

## Evals

| Variable | Default | Description |
|----------|---------|-------------|
| `AGENT_JUDGE_ENABLED` | `false` | Set to `true` to run `AgentAsJudgeEval` as a post-hook on every agent response. Disabled by default to avoid extra LLM calls. |

When enabled, each agent response is scored against per-agent quality criteria (accuracy, relevance, conciseness) and the result is stored in the `eval_runs` table. Scores below 7 (out of 10) are flagged in logs.

<Note>
`AGENT_JUDGE_ENABLED=true` adds one LLM call per agent run. Keep disabled in production unless you need continuous quality monitoring.
</Note>

## Knowledge Agent

| Variable | Default | Description |
|----------|---------|-------------|
| `DOCUMENTS_DIR` | `data/docs` | Directory for document browsing via FileTools |

The knowledge agent uses `DOCUMENTS_DIR` to set the base directory for its file browsing tools. In Docker, this defaults to `/app/data/docs`.

## Runtime

| Variable | Default | Description |
|----------|---------|-------------|
| `RUNTIME_ENV` | `dev` | Set to `dev` for auto-reload, `prd` for production |
| `AGNO_DEBUG` | `True` | Enable Agno debug logging |
| `WAIT_FOR_DB` | - | Container waits for database readiness before starting |
| `PRINT_ENV_ON_LOAD` | - | Print environment variables on container start |

## Docker

| Variable | Default | Description |
|----------|---------|-------------|
| `IMAGE_TAG` | `latest` | Tag applied to backend and frontend images |
| `GHCR_OWNER` | `jrmatherly` | GHCR image owner (used by `docker-compose.prod.yaml`) |

## Frontend

| Variable | Default | Description |
|----------|---------|-------------|
| `NEXT_PUBLIC_DEFAULT_ENDPOINT` | `http://localhost:8000` | Default AgentOS endpoint shown in the UI |
| `NEXT_PUBLIC_OS_SECURITY_KEY` | - | Pre-fill the auth token in the frontend UI |
| `NEXT_TELEMETRY_DISABLED` | - | Set to `1` to disable Next.js telemetry |

<Note>
Frontend API calls are browser-side (client fetch), not server-side. The API URL is configured in the UI sidebar, not through environment variables alone.
</Note>

## Where defaults are defined

| Source | Purpose |
|--------|---------|
| `mise.toml` (`[[env]]` blocks) | Development defaults, overridden by `.env` |
| `example.env` | Template for `.env` with documented defaults |
| `docker-compose.yaml` | Container defaults via `${VAR:-default}` |
| `backend/db/session.py` | Python fallback defaults for DB config |

When adding or changing environment variables, update all four locations to stay in sync.
