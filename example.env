###############################################################
# Apollos AI - Environment Configuration
###############################################################
# Copy to .env and fill in required values:
#   cp example.env .env

# ----- LiteLLM Proxy (required) ------------------------------
LITELLM_API_KEY=
LITELLM_BASE_URL=http://localhost:4000/v1

# ----- Models ------------------------------------------------
MODEL_ID=gpt-5-mini
EMBEDDING_MODEL_ID=text-embedding-3-small
EMBEDDING_DIMENSIONS=1536

# ----- Database ----------------------------------------------
DB_HOST=apollos-db
DB_PORT=5432
DB_USER=ai
# Generate with: `openssl rand -base64 22 | tr -d '/+=' | head -c 32`
DB_PASS=ai
DB_DATABASE=ai

# ----- Authentication — Legacy HS256 --------------------------
# Retained for backward-compat tooling. Entra ID takes precedence when set.
# Generate with: `openssl rand -base64 32`
JWT_SECRET_KEY=

# ----- Authentication — Azure Entra ID -----------------------
# Set all 4 values to enable Entra ID JWT auth (empty = auth disabled)
# Complete Azure setup first: see .scratchpad/agno-enhancements/entra-id-plan/01-azure-setup.md
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
AZURE_AUDIENCE=api://<Application (client) ID>

# CORS: Frontend URL allowed by Access-Control-Allow-Origin
FRONTEND_URL=http://localhost:3000

# ----- Frontend: Azure Entra ID (baked at Next.js build time) -
# Must match AZURE_TENANT_ID and AZURE_CLIENT_ID above
NEXT_PUBLIC_AZURE_TENANT_ID=
NEXT_PUBLIC_AZURE_CLIENT_ID=
# Redirect URI after login — must match Azure App Registration
NEXT_PUBLIC_REDIRECT_URI=http://localhost:3000

# ----- Runtime ------------------------------------------------
# Set to "dev" for auto-reload, "prd" for production
RUNTIME_ENV=dev
AGNO_DEBUG=True
AUTH_DEBUG=True

# ----- Observability -------------------------------------------
# Layer 1: Built-in trace-to-database (stores in PostgreSQL)
# Set to "true" to enable. Fine to leave empty for local dev.
TRACING_ENABLED=

# Layer 2: OTLP multi-export (comma-separated endpoints)
# e.g., https://us.cloud.langfuse.com/api/public/otel,http://siem:4318
OTLP_ENDPOINTS=

# Auth headers for each OTLP endpoint (comma-separated, parallel to OTLP_ENDPOINTS)
# e.g., Authorization=Basic abc123,X-API-Key=xyz
OTLP_AUTH_HEADERS=

# Legacy single-endpoint (still supported as fallback)
# OTEL_EXPORTER_OTLP_ENDPOINT=

# ----- A2A Protocol -------------------------------------------
# Set to "true" to expose agents via A2A protocol endpoints
# A2A_ENABLED=true
# Base URL for AgentCard URLs (adjust for production domain)
# A2A_BASE_URL=http://localhost:8000

# ----- Agent-as-Judge -----------------------------------------
# Set to "true" to run AgentAsJudgeEval as a post-hook on every agent response.
# Disabled by default to avoid extra LLM calls in production.
AGENT_JUDGE_ENABLED=false

# ----- Microsoft 365 Integration (Softeria MCP Server) --------
# Enable per-user M365 access via self-hosted MCP server
M365_ENABLED=false
# Softeria MCP server URL (Docker service name used in compose)
M365_MCP_URL=http://apollos-m365-mcp:9000/mcp
# Host port for MCP server (only needed if accessing from host)
M365_MCP_PORT=9000
# Fernet encryption key for token cache persistence
# Generate: python3 -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# If unset, derives from AZURE_CLIENT_SECRET (acceptable for dev only)
# M365_CACHE_KEY=

# ----- MCP Gateway (IBM ContextForge) -------------------------
# Enable gateway integration for centralized MCP server management
MCP_GATEWAY_ENABLED=false
# Gateway base URL (Docker service name used in compose)
MCP_GATEWAY_URL=http://apollos-mcp-gateway:4444
# JWT secret for gateway service tokens (shared with gateway)
# Generate with: `openssl rand -base64 32`
MCP_GATEWAY_JWT_SECRET=dev-gateway-secret
# Gateway admin credentials
MCP_GATEWAY_ADMIN_EMAIL=admin@localhost
MCP_GATEWAY_ADMIN_PASSWORD=changeme
# Host port for gateway (only needed if accessing from host)
MCP_GATEWAY_PORT=4444
# Entra ID SSO for gateway (optional — separate app registration)
# MCP_GATEWAY_ENTRA_CLIENT_ID=
# MCP_GATEWAY_ENTRA_CLIENT_SECRET=
# Entra group IDs for gateway admin access
# MCP_GATEWAY_ADMIN_GROUPS=[]
# Entra group → ContextForge role mappings
# MCP_GATEWAY_ROLE_MAPPINGS={}

# ----- Knowledge Agent ----------------------------------------
# Directory for knowledge agent file browsing (default: ./data/docs)
# DOCUMENTS_DIR=./data/docs

# ----- Docker -------------------------------------------------
# Tag applied to backend and frontend images in docker-compose
IMAGE_TAG=latest
# GHCR owner for production images (used by docker-compose.prod.yaml)
GHCR_OWNER=jrmatherly

# ----- Frontend -----------------------------------------------
# Default AgentOS endpoint shown in the UI (defaults to http://localhost:8000)
# NEXT_PUBLIC_DEFAULT_ENDPOINT=http://localhost:8000

# Optional: pre-fill the AgentOS security key in the UI
# NEXT_PUBLIC_OS_SECURITY_KEY=

# Optional: disable Next.js Telemetry
# NEXT_TELEMETRY_DISABLED=1
