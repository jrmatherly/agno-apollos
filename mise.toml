# =============================================================================
# Apollos AI â€” mise configuration
# =============================================================================
# Docs: https://mise.jdx.dev/configuration.html
# Tasks: mise tasks  |  Run: mise run <task>  |  Watch: mise watch -t <task>
# =============================================================================

# ---------------------------------------------------------------------------
# Tools
# ---------------------------------------------------------------------------
[tools]
python = "3.12"
uv = "latest"
node = "24"
pnpm = "latest"

# ---------------------------------------------------------------------------
# Environment
# ---------------------------------------------------------------------------
[env]
_.file = ".env"

PYTHONPATH = "{{config_root}}"

# Defaults (overridden by .env when present)
LITELLM_BASE_URL = "http://localhost:4000/v1"
MODEL_ID = "gpt-5-mini"
EMBEDDING_MODEL_ID = "text-embedding-3-small"
EMBEDDING_DIMENSIONS = "1536"

DB_HOST = "localhost"
DB_PORT = "5432"
DB_USER = "ai"
DB_PASS = "ai"
DB_DATABASE = "ai"
DB_DRIVER = "postgresql+psycopg"

RUNTIME_ENV = "dev"

# ---------------------------------------------------------------------------
# Available Tasks (mise run <task>)
# ---------------------------------------------------------------------------
# setup              Install all dependencies (backend + frontend)
# format             Format Python code (ruff format + import sorting)
# lint               Lint Python code (ruff check)
# typecheck          Type-check Python code (mypy)
# validate           Run all checks (backend + frontend)
# dev                Start full stack in watch mode (hot-reload)
# db                 Start database only (PostgreSQL + pgvector)
# load-docs          Load knowledge base documents into vector DB
# ci                 Full CI pipeline (install + validate)
# clean              Clean build artifacts and caches
#
# docker:up          Start full stack (build + detach)
# docker:down        Stop all services
# docker:logs        Tail logs from all services
# docker:build       Build multi-arch Docker image (amd64 + arm64)
#
# frontend:dev       Start frontend dev server (Next.js)
# frontend:build     Build frontend for production
# frontend:setup     Install frontend dependencies (pnpm)
# frontend:lint      Lint frontend code (ESLint)
# frontend:format    Check frontend formatting (Prettier)
# frontend:typecheck Type-check frontend code (TypeScript)
# frontend:validate  Run all frontend checks (lint + format + typecheck)

# ---------------------------------------------------------------------------
# Settings
# ---------------------------------------------------------------------------
[settings]
experimental = true
